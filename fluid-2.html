<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0, user-scalable=yes">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="./favicon.png" sizes="64*64" />
    <!-- IE -->
    <link rel="SHORTCUT ICON" href="./favicon.png" />
    <!-- mozilla -->
    <link rel="icon" href="favicon.png" type="image/ico" /> 


    <!-- Bootstrap core CSS -->
    <link href="./bootstrap.min.css" rel="stylesheet" /> 
    <!-- Bootstrap theme -->
    <link href="./bootstrap-theme.min.css" rel="stylesheet" /> 

    <title>CS770 Project Task</title>
  </head>

  <body>
    <form id='myForm' align='center' action="mailto:zarcen@gmail.com" method="post" enctype="text/plain" >
      Name: <input style='display:' type="text" name="Name" value=''>
      <input style='display:none' type="text" name="Time Consuming" id="timeConsuming">
      <input style='display:none' type="text" name="Touch Times" id="touchtimes">
      <input style='display:none' type='text' name='Offset' id='offsetLogs'>
      <input class='btn btn-primary' type="button" value="Start" onClick="taskStart()">

      <div id='start-alert' class="alert alert-info" role="alert" style='display:none;margin-bottom:0px;font-size:10px'>Your task starts NOW. Please start to read the article.</div>
      <div id='container' class="container" align='center' style='margin-top:35px'>
        <p class="context" id="article" style="font-size:14px" align="justify">  
        This history tells about what happened while Abe Lincoln had a job working in a 
        store in a small town. Every day people came and bought things they needed there. It was a frontier community. People did not have any extra money to spare. This story tells you about his character. As you read, think about the traits he shows by what he does.
        Abe Lincoln could not endure the thought of cheating any one, even though it had been done unintentionally. He took great care of the money at the store. But some days there were mistakes. He always made sure to correct them. 
        One day a woman bought goods in Offutt's store amounting to something over two dollars. She paid Abe the money and went away satisfied. That night, on going over the sales of the day, Abe found that he had charged the woman six and one-fourth cents too much. After closing the store, though it was late, he could not go home to supper or to bed till he had restored that sixpence to its proper owner. She lived more than two miles away, but that did not matter to Abe Lincoln. He walked all the way there and back.
        Another evening, as he was closing the store, a woman came in for a half-pound of tea. He weighed it out for her and took the pay. But early next morning, when he came to "open up," he found the four-ounce weight instead of the eight-ounce on the scales, and inferred that he had given that woman only half as much tea as he had taken the money for. Of course, the woman would never know the difference, and it meant walking several miles and back, but the honest clerk weighed out another quarter pound of tea, locked the store and took that long walk before breakfast. 
        J. G. Holland wrote, in his "Life of Abraham Lincoln," of the young man's progress during his first year in New Salem:
        "The year that Lincoln was in Denton Offutt's store was one of great advance. He had made new and valuable acquaintances, read many books, won multitudes of friends, and become ready for a step further in advance. Those who could appreciate brains respected him, and those whose ideas of a man related to his muscles were devoted to him. It was while he was performing the work of the store that he acquired the nickname, 'Honest Abe'å¨— characterization that he never dishonored, that he never outgrew. He was everybody's friend, the best-natured, the most sensible, the best-informed, the most modest and unassuming, the kindest, gentlest, roughest, strongest, best fellow in all New Salem and the region round about."
        </p>
      </div> <!-- /container -->
      <input class='btn btn-primary btn-lg' type="button" onclick='submitResult();' value="End">
    </form>

    <!-- Site footer -->
    <div class="container footer">
    </div> <!-- /container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="./dist/js/bootstrap.min.js"></script>
    <script>
      var touchtimes = 0;
      var yOffsetOnTouchStart;
      var yOffsetOnTouchEnd;
      var offset_arr = [];


      function myTouchStartHandler() {
        yOffsetOnTouchStart = window.pageYOffset;
        touchtimes+=1;
        //$('#offsetLogs').val('hi');
      }

      function myTouchEndHandler() {
        yOffsetOnTouchEnd = window.pageYOffset;
        offset_arr.push(yOffsetOnTouchEnd - yOffsetOnTouchStart);
      }


      var c=0;
      var t;

      function taskStart() {
        document.getElementById('timeConsuming').value=c;
        c=c+1;
        t=setTimeout("timedCount()",1000);
        touchtimes = 0;
        document.ontouchstart = myTouchStartHandler;
        document.ontouchend = myTouchEndHandler;
        $('#start-alert')[0].style.display = 'block';
        $('.container')[0].style.marginTop = '0px';
        //window.scrollTo(0, 1);
        scrollTo('#container');

      }

      function timedCount() {
        document.getElementById('timeConsuming').value=c;
        c=c+1;
        t=setTimeout("timedCount()",1000);
      }

      function submitResult() {
        document.getElementById('touchtimes').value=touchtimes;
        clearTimeout(t);
        $('input:text[name=Offset]').val(offset_arr.toString());
        $('#myForm')[0].action += '?subject=HCI_Project';
        $("#myForm").submit();
      }
      //alert(window.screen.width);
      //The following part is for mobile-device screen visibility config
      function refreshContactWhenFlip() {
        w=document.body.clientWidth;
        //alert(w);
        //alert($('#article')[0].style.fontSize);
        if(w > 600){ // horizontal orientation
          $('#article')[0].style.fontSize = '14px';
        }
        else if (w < 400) { // vertical orientation
          $('#article')[0].style.fontSize = '14px';
          //$('#article').show();
        }
      }
      // execute once when load page
      refreshContactWhenFlip();

      // jQuery resize event
      $(window).resize(function() {
        refreshContactWhenFlip();
      });

      function scrollTo(tar_id) {
        $("body").scrollTop($(tar_id).offset().top - 75);
      }

      $("body").scrollTop(0);
    </script>
  </body>
</html>
